data <- read_csv("../data/pilotA.csv")
data <- data %>%
filter(consent == "I agree") # Exclude those who didn't give consent
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C4, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
condition, # control (=control) or anti-inherence treatment (=anti_inherence)
SurveyOrder, # inherence heuristic scale first (=IH_O) vs ought inferences first (=O_IH)
attn)# attention check
# Add subject ID
data <- mutate(data, subject = row_number())
# Add subject ID
data <- mutate(data, subject = row_number(IH_1))
require("knitr")
opts_knit$set(root.dir = "C:/Users/Marianna/Desktop/Dropbox/Stanford/methods/tworek2016")
library(tidyverse)
library(mediation)
#### Import data
data <- read_csv("/data/pilotA.csv")
library(tidyverse)
library(mediation)
#### Import data
data <- read_csv("data/pilotA.csv")
require("knitr")
opts_knit$set(root.dir = "C:/Users/Marianna/Desktop/Dropbox/Stanford/methods/tworek2016")
library(tidyverse)
library(mediation)
#### Import data
data <- read_csv("data/pilotA.csv")
#### Import data
data <- read_csv("../data/pilotA.csv")
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C4, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
condition, # control (=control) or anti-inherence treatment (=anti_inherence)
SurveyOrder, # inherence heuristic scale first (=IH_O) vs ought inferences first (=O_IH)
attn)# attention check
# Add subject ID
data <- mutate(data, subject = row_number())
# Remove all strings (mainly Likert scale labels)
data <- data %>%
mutate_at(vars(IH_1:O_6), ~gsub("([a-z]|[A-Z]|\\s)*", "", .)) %>%
mutate_at(vars(IH_1:O_6), as.numeric)
#### Data exclusion / filtering
data <- data %>%
filter(attn == "Yes" | # Exclude those who didn't pay attention
IH_C1 <=5 | IH_C2 <=5 | IH_C3 >= 5 | IH_C4 >= 5) %>% # Exclude those who failed control questions on the inherence heuristic scale
dplyr::select(-attn, -(IH_C1:IH_C4)) # Delete attn and inherence heuristic scale control columns
#### Prepare data for analysis - create columns etc.
# gather to tidy long form
data_tidy <- data %>%
gather(question, response, IH_1:O_6)
# classify items as inherence heuristic questions vs ought questions
data_tidy <- data_tidy %>%
separate(question, c("question_type", "question_number"), "_")
# summarize inherence bias average and ought measure average across conditions
data_means <- data_tidy %>%
group_by(condition, question_type) %>%
summarize(avg=mean(response, na.rm=TRUE), sd=sd(response, na.rm=TRUE), n())
data_means
require("knitr")
opts_knit$set(root.dir = "C:/Users/Marianna/Desktop/Dropbox/Stanford/methods/tworek2016")
### Data Preparation
#### Load Relevant Libraries and Functions
library(tidyverse)
library(mediation)
#### Import data
data <- read_csv("data/pilotB.csv")
### Data Preparation
#### Load Relevant Libraries and Functions
library(tidyverse)
library(mediation)
#### Import data
data <- read_csv("../data/pilotB.csv")
#### Initial data formatting
# Filter out those who didn't consent
data <- data %>%
filter(consent == "I agree") # Exclude those who didn't give consent
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C4, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
condition, # control (=control) or anti-inherence treatment (=anti_inherence)
SurveyOrder, # inherence heuristic scale first (=IH_O) vs ought inferences first (=O_IH)
attn)# attention check
# Add subject ID
data <- mutate(data, subject = row_number())
# Remove all strings (mainly Likert scale labels)
data <- data %>%
mutate_at(vars(IH_1:O_6), ~gsub("([a-z]|[A-Z]|\\s)*", "", .)) %>%
mutate_at(vars(IH_1:O_6), as.numeric)
#### Data exclusion / filtering
data <- data %>%
filter(attn == "Yes" | # Exclude those who didn't pay attention
IH_C1 <=5 | IH_C2 <=5 | IH_C3 >= 5 | IH_C4 >= 5) %>% # Exclude those who failed control questions on the inherence heuristic scale
dplyr::select(-attn, -(IH_C1:IH_C4)) # Delete attn and inherence heuristic scale control columns
#### Prepare data for analysis - create columns etc.
# gather to tidy long form
data_tidy <- data %>%
gather(question, response, IH_1:O_6)
# classify items as inherence heuristic questions vs ought questions
data_tidy <- data_tidy %>%
separate(question, c("question_type", "question_number"), "_")
# summarize inherence bias average and ought measure average across conditions
data_means <- data_tidy %>%
group_by(condition, question_type) %>%
summarize(avg=mean(response, na.rm=TRUE), sd=sd(response, na.rm=TRUE), n())
data_means
## Manipulation check: t-test between conditions on inherence heuristic scale
t.test(response ~ condition, data_tidy, subset = question_type == "IH")
## Effects of manipulation on ought inferences: t-test between conditions on ought measure
t.test(response ~ condition, data_tidy, subset = question_type == "O")
## Effects of manipulation on ought inferences via inherence bias: mediation analysis from condition to inherence heuristic scale to ought measure
# Average inherence bias and ought measure per subject
data_means_subj <- data_tidy %>%
group_by(subject, condition, question_type) %>%
summarize(avg=mean(response, na.rm=TRUE)) %>%
spread(question_type, avg)
# condition coded as 0 (=control) or 1 (=anti_inherence) factor
data_means_subj$condition <- gsub('control', '0', data_means_subj$condition)
data_means_subj$condition <- gsub('anti_inherence', '1', data_means_subj$condition)
data_means_subj$condition <- as.numeric(as.character(data_means_subj$condition))
# condition to ought measure (x->y)
model.0 <- lm(O ~ condition, data_means_subj)
summary(model.0)
# condition to inherence bias (x->m)
model.M <- lm(IH ~ condition, data_means_subj)
summary(model.M)
# condition and inherence bias to ought measure (x+m -> y)
model.Y <- lm(O ~ condition + IH, data_means_subj)
summary(model.Y)
set.seed(1234)
results <- mediation::mediate(model.M, model.Y, treat="condition", mediator="IH", boot=TRUE, sims=500)
summary(results)
require("knitr")
opts_knit$set(root.dir = "C:/Users/Marianna/Desktop/Dropbox/Stanford/methods/tworek2016")
### Data Preparation
#### Load Relevant Libraries and Functions
library(tidyverse)
#### Import data for analysis
data <- read_csv("../data/Exp1_pilotA.csv")
#### Initial data formatting
# Filter out those who didn't consent
data <- data %>%
filter(consent == "I agree") # Exclude those who didn't give consent
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C4, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
attn)# attention check
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C2, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
attn)# attention check
# Add subject ID
data <- mutate(data, subject = row_number())
# Remove all strings (mainly Likert scale labels)
data <- data %>%
mutate_at(vars(IH_1:O_6), ~gsub("([a-z]|[A-Z]|\\s)*", "", .)) %>%
mutate_at(vars(IH_1:O_6), as.numeric)
data
#### Data exclusion / filtering
data <- data %>%
filter(attn == "Yes" | # Exclude those who didn't pay attention
IH_C1 !=3 | IH_C2 !=7) %>% # Exclude those who failed control questions on the inherence heuristic scale
dplyr::select(-attn, -(IH_C1:IH_C2)) # Delete attn and inherence heuristic scale control columns
data
#### Prepare data for analysis - create columns etc.
# gather to tidy long form
data_tidy <- data %>%
gather(question, response, IH_1:O_6)
# classify items as inherence heuristic questions vs ought questions
data_tidy <- data_tidy %>%
separate(question, c("question_type", "question_number"), "_")
# summarize inherence bias average and ought measure average across subjects
data_means <- data_tidy %>%
group_by(question_type) %>%
summarize(avg=mean(response, na.rm=TRUE), sd=sd(response, na.rm=TRUE), n())
data_means
# summarize inherence bias and ought measure per subject
data_means_subj <- data_tidy %>%
group_by(subject, question_type) %>%
summarize(avg=mean(response, na.rm=TRUE)) %>%
spread(question_type, avg)
data_means_subj
cor.test(data_means_subj$IH, data_means_subj$O, method = "pearson")
### Data Preparation
#### Load Relevant Libraries and Functions
library(tidyverse)
#### Import data for analysis
data <- read_csv("../data/Exp1_pilotB.csv")
#### Initial data formatting
# Filter out those who didn't consent
data <- data %>%
filter(consent == "I agree") # Exclude those who didn't give consent
# select relevant columns
data <- data %>%
dplyr::select(IH_1:IH_C2, # inherence heuristic scale
O_1, O_2, O_3, O_4, O_5, O_6, # ought inferences
attn)# attention check
# Add subject ID
data <- mutate(data, subject = row_number())
# Remove all strings (mainly Likert scale labels)
data <- data %>%
mutate_at(vars(IH_1:O_6), ~gsub("([a-z]|[A-Z]|\\s)*", "", .)) %>%
mutate_at(vars(IH_1:O_6), as.numeric)
#### Data exclusion / filtering
data <- data %>%
filter(attn == "Yes" | # Exclude those who didn't pay attention
IH_C1 !=3 | IH_C2 !=7) %>% # Exclude those who failed control questions on the inherence heuristic scale
dplyr::select(-attn, -(IH_C1:IH_C2)) # Delete attn and inherence heuristic scale control columns
#### Prepare data for analysis - create columns etc.
# gather to tidy long form
data_tidy <- data %>%
gather(question, response, IH_1:O_6)
# classify items as inherence heuristic questions vs ought questions
data_tidy <- data_tidy %>%
separate(question, c("question_type", "question_number"), "_")
# summarize inherence bias average and ought measure average across subjects
data_means <- data_tidy %>%
group_by(question_type) %>%
summarize(avg=mean(response, na.rm=TRUE), sd=sd(response, na.rm=TRUE), n())
data_means
# summarize inherence bias and ought measure per subject
data_means_subj <- data_tidy %>%
group_by(subject, question_type) %>%
summarize(avg=mean(response, na.rm=TRUE)) %>%
spread(question_type, avg)
data_means_subj
# scatterplot of inherence bias measure and ought measure
ggplot(data_means_subj, aes(x = IH, y = O)) +
geom_point() +
labs(x="Inherence bias measure",
y="Ought measure") +
geom_smooth(method = "lm") +
ggtitle("Inherence bias measure is correlated with ought measure")
require("knitr")
knitr::opts_chunk$set(echo = TRUE)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
library(tidyverse)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
data
data_tidy <- data %>%
gather(org, member, PACE:NAQT)
data_tidy
library(tidyverse)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes")
# overall = 18 f vs 79 m -> 82% male
data_overall <- data %>%
count(gender)
# PACE = 14 f vs 49 m -> 78% male
data_PACE <- data %>%
filter(PACE == "yes") %>%
count(gender)
# NAQT = 2 f vs 12 m -> 86% male
data_NAQT <- data %>%
filter(NAQT == "yes") %>%
count(gender)
# ACF = 7 f vs 32 m -> 82% male
data_ACF <- data %>%
filter(ACF == "yes") %>%
count(gender)
# bar graph of % female by org
ggplot(data_org, aes(x = org, y = percent_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes")
data_tidy
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, female)
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender)
data_tidy
?spread
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(female, male, gender:n)
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n)
data_tidy
library(tidyverse)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
add_column(prop_female = female/(female+male))
data_tidy <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
data_tidy
# bar graph of % female by org
ggplot(data_tidy, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
data_overall <- data %>%
count(gender)
data_overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
data_overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
data_overall
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
data_combined
library(tidyverse)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
# bar graph of % female by org
ggplot(data_tidy, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
library(tidyverse)
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
data_combined
library(tidyverse)
library(ggthemes)
theme_set(theme_few())
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
library(tidyverse)
library(ggthemes)
theme_set(theme_few())
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "% female")
library(tidyverse)
library(ggthemes)
theme_set(theme_few())
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "Proportion female") +
ylim(0, 1)
library(tidyverse)
library(ggthemes)
theme_set(theme_few())
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
data_combined$org <- factor(data_combined$org,levels = c("PACE", "NAQT", "ACF", "overall"))
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "Proportion female") +
ylim(0, 1)
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "Proportion female") +
ylim(0, 1) +
geom_hline(aes(yintercept = 0.5))
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in members of national quizbowl organizations", x = "Organization", y = "Proportion female") +
ylim(0, 1) +
geom_hline(aes(yintercept = 0.5), linetype="dashed")
library(tidyverse)
library(ggthemes)
theme_set(theme_few())
data <- read_csv("quizbowl_org_gender_12.2.18.csv")
# female prop by org
data_org <- data %>%
gather(org, member, PACE:NAQT) %>%
filter(member=="yes") %>%
count(org, gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male))
# female prop overall
data_overall <- data %>%
count(gender) %>%
spread(gender, n) %>%
mutate(prop_female = female/(female+male), org="overall")
# female prop by org + overall
data_combined <- bind_rows(data_org, data_overall)
data_combined$org <- factor(data_combined$org,levels = c("PACE", "NAQT", "ACF", "overall"))
# bar graph of % female by org
ggplot(data_combined, aes(x = org, y = prop_female)) +
geom_bar(position = "dodge", stat = "identity") +
labs(title = "Gender representation in national quizbowl organizations", x = "Organization", y = "Proportion female") +
ylim(0, 1) +
geom_hline(aes(yintercept = 0.5), linetype="dashed")
install.packages(c("callr", "cli", "dbplyr", "digest", "doBy", "dotCall64", "dplyr", "DT", "evaluate", "ggplot2", "glue", "haven", "htmlwidgets", "lme4", "mclust", "mime", "munsell", "nloptr", "openssl", "packrat", "pillar", "pkgconfig", "plotrix", "processx", "psych", "R6", "rcmdcheck", "Rcpp", "RcppEigen", "RCurl", "readr", "reprex", "rio", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "scales", "sessioninfo", "shiny", "shinythemes", "stringi", "testthat", "tidyr", "tidyselect", "tinytex", "utf8", "xfun", "xts"))
install.packages(c("callr", "cli", "dbplyr", "digest", "doBy", "dotCall64", "dplyr", "DT", "evaluate", "ggplot2", "glue", "haven", "htmlwidgets", "lme4", "mclust", "mime", "munsell", "nloptr", "openssl", "packrat", "pillar", "pkgconfig", "plotrix", "processx", "psych", "R6", "rcmdcheck", "Rcpp", "RcppEigen", "RCurl", "readr", "reprex", "rio", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "scales", "sessioninfo", "shiny", "shinythemes", "stringi", "testthat", "tidyr", "tidyselect", "tinytex", "utf8", "xfun", "xts"))
install.packages(c("callr", "cli", "dbplyr", "digest", "doBy", "dotCall64", "dplyr", "DT", "evaluate", "ggplot2", "glue", "haven", "htmlwidgets", "lme4", "mclust", "mime", "munsell", "nloptr", "openssl", "packrat", "pillar", "pkgconfig", "plotrix", "processx", "psych", "R6", "rcmdcheck", "Rcpp", "RcppEigen", "RCurl", "readr", "reprex", "rio", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "scales", "sessioninfo", "shiny", "shinythemes", "stringi", "testthat", "tidyr", "tidyselect", "tinytex", "utf8", "xfun", "xts"))
install.packages(c("callr", "cli", "dbplyr", "digest", "doBy", "dotCall64", "dplyr", "DT", "evaluate", "ggplot2", "glue", "haven", "htmlwidgets", "lme4", "mclust", "mime", "munsell", "nloptr", "openssl", "packrat", "pillar", "pkgconfig", "plotrix", "processx", "psych", "R6", "rcmdcheck", "Rcpp", "RcppEigen", "RCurl", "readr", "reprex", "rio", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "scales", "sessioninfo", "shiny", "shinythemes", "stringi", "testthat", "tidyr", "tidyselect", "tinytex", "utf8", "xfun", "xts"))
install.packages(c("callr", "cli", "dbplyr", "digest", "doBy", "dotCall64", "dplyr", "DT", "evaluate", "ggplot2", "glue", "haven", "htmlwidgets", "lme4", "mclust", "mime", "munsell", "nloptr", "openssl", "packrat", "pillar", "pkgconfig", "plotrix", "processx", "psych", "R6", "rcmdcheck", "Rcpp", "RcppEigen", "RCurl", "readr", "reprex", "rio", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "scales", "sessioninfo", "shiny", "shinythemes", "stringi", "testthat", "tidyr", "tidyselect", "tinytex", "utf8", "xfun", "xts"))
